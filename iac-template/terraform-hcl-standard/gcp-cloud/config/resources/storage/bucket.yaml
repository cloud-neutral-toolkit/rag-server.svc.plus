service: cloud_storage
environment: dev
module:
  name: artifact-bucket
  source: terraform-google-modules/cloud-storage/google
  version: "~> 4.0"
inputs:
  project_id: xcontrol-dev-apps
  name: xcontrol-dev-artifacts
  location: US
  versioning: true
  storage_class: STANDARD
  uniform_bucket_level_access: true
  encryption:
    default_kms_key_name: projects/xcontrol-dev-security/locations/us/keyRings/app/cryptoKeys/storage
  lifecycle_rules:
    - action:
        type: Delete
      condition:
        age: 30
    - action:
        type: SetStorageClass
        storage_class: NEARLINE
      condition:
        age: 90
  retention_policy:
    retention_period: 2592000
  logging:
    log_bucket: xcontrol-dev-audit-logs
    log_object_prefix: storage
labels:
  environment: dev
  owner: app-team
