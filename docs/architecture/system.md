# System Architecture

Describe the overall architecture with user, controller, agents.

ğŸŒ User Panel â”€â”€â–º  XControl API  â—„â”€â”€â”€â”€â”€â”€â”€â”
     â–²                â”‚                  â”‚
     â”‚ REST API       â–¼                  â”‚
[æµè§ˆå™¨]        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        gRPC/HTTP
                â”‚ PostgreSQL  â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ Xray èŠ‚ç‚¹ Agent #1 â”‚
                                       â”‚ Xray + stats/api    â”‚
                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       ...
                                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                       â”‚ DeepFlow Agent #N  â”‚
                                       â”‚ é‡‡é›†èŠ‚ç‚¹æµé‡ä¸æŒ‡æ ‡   â”‚
                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



ğŸ§­ å¤šç§Ÿæˆ· VLESS ç®¡ç†ç³»ç»Ÿæ¶æ„å›¾ ï¼ˆç”¨æˆ·é¢ + æ§åˆ¶é¢ + å¤šèŠ‚ç‚¹ï¼‰

                       ğŸŒ ç”¨æˆ·é¢ï¼ˆUser Panelï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [User Browser]                                              â”‚
â”‚   â”œâ”€ğŸ“„ æŸ¥çœ‹é…ç½®å¯¼å‡ºï¼ˆvless:// + QR ç ï¼‰                     â”‚
â”‚   â”œâ”€ğŸ“Š å½“å‰ä½¿ç”¨é‡ï¼ˆä¸Š/ä¸‹è¡Œæµé‡ã€å›¾è¡¨ï¼‰                     â”‚
â”‚   â””â”€ğŸŒ å¯ç”¨èŠ‚ç‚¹åˆ—è¡¨ï¼ˆé€‰æ‹©è®¢é˜…ï¼‰                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ HTTPS API è¯·æ±‚
               â–¼

                       ğŸ§  æ§åˆ¶é¢ï¼ˆvless-admin Controllerï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ REST API (Gin)                                              â”‚
â”‚   â”œâ”€ /api/users         â†’ ç”¨æˆ·æ³¨å†Œ/æ·»åŠ /æµé‡æŸ¥è¯¢           â”‚
â”‚   â”œâ”€ /api/subscription  â†’ vless:// è®¢é˜…é“¾æ¥ç”Ÿæˆ            â”‚
â”‚   â”œâ”€ /api/nodes         â†’ å¤šèŠ‚ç‚¹ä¿¡æ¯å±•ç¤º                   â”‚
â”‚   â””â”€ /api/stats         â†’ åå°æµé‡é‡‡é›†ã€æµæ§ç­–ç•¥           â”‚
â”‚                                                             â”‚
â”‚ PostgreSQL                                                  â”‚
â”‚   â”œâ”€ ç”¨æˆ·è¡¨ (email + UUID)                                 â”‚
â”‚   â”œâ”€ èŠ‚ç‚¹è¡¨                                                 â”‚
â”‚   â””â”€ æµé‡è¡¨ï¼ˆæ¯æ—¥/æ¯å°æ—¶ï¼‰                                 â”‚
â”‚                                                             â”‚
â”‚ å¯é€‰ç®¡ç†ç•Œé¢ï¼ˆå¦‚éœ€ï¼‰                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ HTTP/gRPC æ§åˆ¶ä¸æ‹‰å–é…ç½®
               â–¼

                     ğŸ›°ï¸ å¤šèŠ‚ç‚¹ï¼ˆXray-core + Agentï¼‰

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent: Node #1     â”‚   â”‚ Agent: Node #2     â”‚   â”‚ Agent: Node #N     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Xray-core      â”‚ â”‚   â”‚ â”‚ Xray-core      â”‚ â”‚   â”‚ â”‚ Xray-core      â”‚ â”‚
â”‚ â”‚ + stats + api  â”‚ â”‚   â”‚ â”‚ + stats + api  â”‚ â”‚   â”‚ â”‚ + stats + api  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â¬† ä¸ŠæŠ¥ç”¨æˆ·æµé‡     â”‚   â”‚  â¬† ä¸ŠæŠ¥ç”¨æˆ·æµé‡     â”‚   â”‚  â¬† ä¸ŠæŠ¥ç”¨æˆ·æµé‡     â”‚
â”‚  â¬‡ æ‹‰å–ç”¨æˆ·é…ç½®     â”‚   â”‚  â¬‡ æ‹‰å–ç”¨æˆ·é…ç½®     â”‚   â”‚  â¬‡ æ‹‰å–ç”¨æˆ·é…ç½®     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

